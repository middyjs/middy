"use strict";(self.webpackChunkmiddy=self.webpackChunkmiddy||[]).push([[1558],{5284:(e,r,a)=>{a.r(r),a.d(r,{assets:()=>u,contentTitle:()=>d,default:()=>m,frontMatter:()=>i,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"middlewares/http-header-normalizer","title":"http-header-normalizer","description":"This middleware normalizes HTTP header names. By default, it normalizes to lowercase. It","source":"@site/docs/middlewares/http-header-normalizer.md","sourceDirName":"middlewares","slug":"/middlewares/http-header-normalizer","permalink":"/docs/middlewares/http-header-normalizer","draft":false,"unlisted":false,"editUrl":"https://github.com/middyjs/middy/tree/main/website/docs/middlewares/http-header-normalizer.md","tags":[],"version":"current","lastUpdatedAt":1740928773000,"frontMatter":{"title":"http-header-normalizer"},"sidebar":"tutorialSidebar","previous":{"title":"http-event-normalizer","permalink":"/docs/middlewares/http-event-normalizer"},"next":{"title":"http-json-body-parser","permalink":"/docs/middlewares/http-json-body-parser"}}');var t=a(4848),l=a(8453),s=a(1470),o=a(9365);const i={title:"http-header-normalizer"},d=void 0,u={},c=[{value:"Install",id:"install",level:2},{value:"Options",id:"options",level:2},{value:"Sample usage",id:"sample-usage",level:2}];function h(e){const r={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:"This middleware normalizes HTTP header names. By default, it normalizes to lowercase. It\ncan also normalize to canonical form."}),"\n",(0,t.jsx)(r.p,{children:"API Gateway does not perform any normalization, so without this middleware headers\nare propagated to Lambda exactly as they were sent by the client. Headers names are\ncase insensitive, so normalization allows code reading header values to be simplified."}),"\n",(0,t.jsxs)(r.p,{children:["Other middlewares like ",(0,t.jsx)(r.a,{href:"#jsonbodyparser",children:(0,t.jsx)(r.code,{children:"jsonBodyParser"})})," or ",(0,t.jsx)(r.a,{href:"#urlencodebodyparser",children:(0,t.jsx)(r.code,{children:"urlEncodeBodyParser"})}),"\nwill rely on headers to be one of the normalized formats, so if you want to support non-normalized headers in your\napp you have to use this middleware before those ones."]}),"\n",(0,t.jsx)(r.h2,{id:"install",children:"Install"}),"\n",(0,t.jsx)(r.p,{children:"To install this middleware you can use NPM:"}),"\n",(0,t.jsxs)(s.A,{groupId:"npm2yarn",children:[(0,t.jsx)(o.A,{value:"npm",children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"npm install --save @middy/http-header-normalizer\n"})})}),(0,t.jsx)(o.A,{value:"yarn",label:"Yarn",children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"yarn add @middy/http-header-normalizer\n"})})}),(0,t.jsx)(o.A,{value:"pnpm",label:"pnpm",children:(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"pnpm add @middy/http-header-normalizer\n"})})})]}),"\n",(0,t.jsx)(r.h2,{id:"options",children:"Options"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"canonical"})," (bool) (optional): if true, modifies the headers to canonical format, otherwise the headers are normalized to lowercase (default ",(0,t.jsx)(r.code,{children:"false"}),")"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"defaultHeaders"})," (object) (optional): Default headers to used if any are missing. i.e. ",(0,t.jsx)(r.code,{children:"Content-Type"})," (default ",(0,t.jsx)(r.code,{children:"{}"}),")"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"normalizeHeaderKey"})," (function) (optional): a function that accepts an header name as a parameter and returns its\ncanonical representation."]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"sample-usage",children:"Sample usage"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:"import middy from '@middy/core'\nimport httpHeaderNormalizer from '@middy/http-header-normalizer'\n\nconst lambdaHandler = (event, context) => {\n  return {}\n}\n\nexport const handler = middy()\n  .use(httpHeaderNormalizer())\n  .handler(lambdaHandler)\n"})})]})}function m(e={}){const{wrapper:r}={...(0,l.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},9365:(e,r,a)=>{a.d(r,{A:()=>s});a(6540);var n=a(4164);const t={tabItem:"tabItem_Ymn6"};var l=a(4848);function s(e){let{children:r,hidden:a,className:s}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,n.A)(t.tabItem,s),hidden:a,children:r})}},1470:(e,r,a)=>{a.d(r,{A:()=>w});var n=a(6540),t=a(4164),l=a(3104),s=a(6347),o=a(205),i=a(7485),d=a(1682),u=a(679);function c(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:r,children:a}=e;return(0,n.useMemo)((()=>{const e=r??function(e){return c(e).map((e=>{let{props:{value:r,label:a,attributes:n,default:t}}=e;return{value:r,label:a,attributes:n,default:t}}))}(a);return function(e){const r=(0,d.XI)(e,((e,r)=>e.value===r.value));if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[r,a])}function m(e){let{value:r,tabValues:a}=e;return a.some((e=>e.value===r))}function p(e){let{queryString:r=!1,groupId:a}=e;const t=(0,s.W6)(),l=function(e){let{queryString:r=!1,groupId:a}=e;if("string"==typeof r)return r;if(!1===r)return null;if(!0===r&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:r,groupId:a});return[(0,i.aZ)(l),(0,n.useCallback)((e=>{if(!l)return;const r=new URLSearchParams(t.location.search);r.set(l,e),t.replace({...t.location,search:r.toString()})}),[l,t])]}function f(e){const{defaultValue:r,queryString:a=!1,groupId:t}=e,l=h(e),[s,i]=(0,n.useState)((()=>function(e){let{defaultValue:r,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(r){if(!m({value:r,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${r}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return r}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:r,tabValues:l}))),[d,c]=p({queryString:a,groupId:t}),[f,b]=function(e){let{groupId:r}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(r),[t,l]=(0,u.Dv)(a);return[t,(0,n.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:t}),v=(()=>{const e=d??f;return m({value:e,tabValues:l})?e:null})();(0,o.A)((()=>{v&&i(v)}),[v]);return{selectedValue:s,selectValue:(0,n.useCallback)((e=>{if(!m({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);i(e),c(e),b(e)}),[c,b,l]),tabValues:l}}var b=a(2303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=a(4848);function x(e){let{className:r,block:a,selectedValue:n,selectValue:s,tabValues:o}=e;const i=[],{blockElementScrollPositionUntilNextRender:d}=(0,l.a_)(),u=e=>{const r=e.currentTarget,a=i.indexOf(r),t=o[a].value;t!==n&&(d(r),s(t))},c=e=>{let r=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const a=i.indexOf(e.currentTarget)+1;r=i[a]??i[0];break}case"ArrowLeft":{const a=i.indexOf(e.currentTarget)-1;r=i[a]??i[i.length-1];break}}r?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":a},r),children:o.map((e=>{let{value:r,label:a,attributes:l}=e;return(0,y.jsx)("li",{role:"tab",tabIndex:n===r?0:-1,"aria-selected":n===r,ref:e=>i.push(e),onKeyDown:c,onClick:u,...l,className:(0,t.A)("tabs__item",v.tabItem,l?.className,{"tabs__item--active":n===r}),children:a??r},r)}))})}function j(e){let{lazy:r,children:a,selectedValue:l}=e;const s=(Array.isArray(a)?a:[a]).filter(Boolean);if(r){const e=s.find((e=>e.props.value===l));return e?(0,n.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:s.map(((e,r)=>(0,n.cloneElement)(e,{key:r,hidden:e.props.value!==l})))})}function g(e){const r=f(e);return(0,y.jsxs)("div",{className:(0,t.A)("tabs-container",v.tabList),children:[(0,y.jsx)(x,{...r,...e}),(0,y.jsx)(j,{...r,...e})]})}function w(e){const r=(0,b.A)();return(0,y.jsx)(g,{...e,children:c(e.children)},String(r))}},8453:(e,r,a)=>{a.d(r,{R:()=>s,x:()=>o});var n=a(6540);const t={},l=n.createContext(t);function s(e){const r=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),n.createElement(l.Provider,{value:r},e.children)}}}]);